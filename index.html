<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>åŒ—æµ·é“èœœæœˆ 12 Days Ultimate</title>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <style>
        :root { --bg: #F9F9F7; --primary: #2D2D2D; --blue: #5EB7F0; --orange: #FF9F43; --green: #8CC63F; --card-bg: #FFFFFF; }
        body { background-color: var(--bg); font-family: -apple-system, "PingFang TC", sans-serif; margin: 0; padding: 10px 15px 100px 15px; color: var(--primary); }
        
        /* é ‚éƒ¨æ¨™é ­ */
        .app-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; }
        .user-avatars { display: flex; }
        .avatar { width: 35px; height: 35px; border-radius: 50%; border: 2px solid white; background: #eee; margin-left: -10px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }

        /* å¤©æ•¸æ»¾å‹• */
        .day-scroller { display: flex; gap: 8px; overflow-x: auto; padding-bottom: 10px; margin-bottom: 15px; -webkit-overflow-scrolling: touch; }
        .day-box { min-width: 65px; height: 75px; background: white; border-radius: 12px; display: flex; flex-direction: column; align-items: center; justify-content: center; box-shadow: 0 2px 8px rgba(0,0,0,0.05); }
        .day-box.active { background: var(--blue); color: white; }
        .day-box span { font-size: 10px; opacity: 0.8; }
        .day-box b { font-size: 16px; margin-top: 4px; }

        /* é€šç”¨å¡ç‰‡ */
        .card { background: var(--card-bg); border-radius: 20px; padding: 20px; box-shadow: 0 4px 15px rgba(0,0,0,0.03); margin-bottom: 15px; position: relative; }
        
        /* æ©Ÿç¥¨æ¨£å¼ (é è¨‚é ) */
        .ticket { border: 1px solid #eee; background: white; border-radius: 20px; overflow: hidden; margin-bottom: 15px; }
        .ticket-header { background: #fdfdfd; padding: 10px 20px; border-bottom: 1px dashed #eee; display: flex; justify-content: space-between; font-size: 12px; color: #999; }
        .ticket-body { padding: 20px; display: flex; justify-content: space-between; align-items: center; text-align: center; }
        .airport-code { font-size: 28px; font-weight: bold; }
        .plane-icon { color: var(--blue); font-size: 20px; }

        /* åº•éƒ¨å°è¦½ */
        .nav-bar { position: fixed; bottom: 0; left: 0; width: 100%; height: 80px; background: white; display: flex; justify-content: space-around; align-items: center; box-shadow: 0 -5px 20px rgba(0,0,0,0.05); z-index: 1000; padding-bottom: env(safe-area-inset-bottom); }
        .nav-item { flex: 1; text-align: center; color: #BBB; font-size: 10px; }
        .nav-item.active { color: var(--primary); font-weight: bold; }
        .nav-icon { font-size: 24px; display: block; margin-bottom: 4px; }

        /* æ–°å¢æŒ‰éˆ• */
        .btn-add { position: fixed; bottom: 100px; right: 20px; width: 55px; height: 55px; background: var(--primary); color: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 28px; box-shadow: 0 5px 15px rgba(0,0,0,0.2); }
        
        /* å½ˆçª— */
        .modal-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 2000; display: flex; align-items: center; justify-content: center; }
        .modal-content { background: white; width: 85%; border-radius: 25px; padding: 25px; max-height: 80vh; overflow-y: auto; }
        input, select, textarea { width: 100%; padding: 12px; margin: 8px 0 15px 0; border: 1px solid #eee; border-radius: 12px; font-size: 16px; background: #f9f9f9; box-sizing: border-box; }
    </style>
</head>
<body>
    <div id="app">
        <div class="app-header">
            <div>
                <h2 style="margin:0; font-size: 18px;">åŒ—åœ‹èœœæœˆå“ˆç±³é”</h2>
                <small style="color:#999;">â„ï¸ 2025 1/12 - 1/23</small>
            </div>
            <div class="user-avatars">
                <div class="avatar" style="background-image: url('https://api.dicebear.com/7.x/adventurer/svg?seed=Hubby'); background-size: cover;"></div>
                <div class="avatar" style="background-image: url('https://api.dicebear.com/7.x/adventurer/svg?seed=Wifey'); background-size: cover;"></div>
            </div>
        </div>

        <div class="day-scroller">
            <div v-for="d in 12" :key="d" :class="['day-box', { active: currentDay === d }]" @click="currentDay = d">
                <span>1/{{ 11+d }}</span>
                <b>DAY {{ d }}</b>
            </div>
        </div>

        <div class="main-content">
            <div v-if="activeTab === 'trip'">
                <div v-for="t in currentDayTrips" :key="t.id" class="card">
                    <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:10px;">
                        <span style="font-weight:bold; color:var(--blue)">{{ t.time }}</span>
                        <span v-if="t.cost > 0" style="font-size:12px; color:#999;">Â¥{{ t.cost }}</span>
                    </div>
                    <div style="font-size: 18px; font-weight: bold; margin-bottom: 5px;">{{ t.title }}</div>
                    <div style="font-size: 13px; color: #666;">ğŸ“ {{ t.loc }}</div>
                    <div v-if="t.trans" style="margin-top:10px; font-size:11px; color:var(--blue); background:#f0f8ff; padding:4px 10px; border-radius:20px; display:inline-block;">
                        ğŸšŒ {{ t.trans }}
                    </div>
                </div>
            </div>

            <div v-if="activeTab === 'book'">
                <div v-for="b in bookings" :key="b.id" class="ticket">
                    <div class="ticket-header">
                        <span>{{ b.type }}</span>
                        <span>{{ b.date }}</span>
                    </div>
                    <div class="ticket-body">
                        <div>
                            <div class="airport-code">{{ b.from }}</div>
                            <div style="font-size:12px;">{{ b.fromTime }}</div>
                        </div>
                        <div class="plane-icon">âœˆï¸</div>
                        <div>
                            <div class="airport-code">{{ b.to }}</div>
                            <div style="font-size:12px;">{{ b.toTime }}</div>
                        </div>
                    </div>
                </div>
                <div v-if="bookings.length === 0" style="text-align:center; color:#ccc; margin-top:50px;">é»æ“Š + æ–°å¢ç¥¨åˆ¸æˆ–è¨‚æˆ¿è³‡è¨Š</div>
            </div>

            <div v-if="activeTab === 'money'">
                <div class="card" style="background:var(--orange); color:white; text-align:center;">
                    <small>ä»Šæ—¥ç¸½è¦½</small>
                    <div style="font-size: 32px; font-weight: bold;">Â¥ {{ dayTotal.toLocaleString() }}</div>
                    <div style="opacity:0.8;">â‰ˆ NT$ {{ Math.round(dayTotal * 0.215) }}</div>
                </div>
                <div v-for="e in currentDayExpenses" :key="e.id" class="card" style="padding:15px; margin-bottom:10px;">
                    <div style="display:flex; justify-content:space-between;">
                        <span>{{ e.cate }} | {{ e.note }}</span>
                        <span style="font-weight:bold;">Â¥{{ e.amount }}</span>
                    </div>
                </div>
            </div>
        </div>

        <div class="nav-bar">
            <div v-for="nav in navs" :class="['nav-item', {active: activeTab === nav.id}]" @click="activeTab = nav.id">
                <span class="nav-icon">{{ nav.icon }}</span>{{ nav.name }}
            </div>
        </div>

        <div class="btn-add" @click="showModal = true">ï¼‹</div>

        <div v-if="showModal" class="modal-overlay" @click.self="showModal = false">
            <div class="modal-content">
                <h3 v-if="activeTab === 'trip'">æ–°å¢è¡Œç¨‹</h3>
                <h3 v-if="activeTab === 'book'">æ–°å¢ç¥¨åˆ¸</h3>
                <h3 v-if="activeTab === 'money'">æ–°å¢æ”¯å‡º</h3>

                <div v-if="activeTab === 'trip'">
                    <input type="time" v-model="form.time">
                    <input type="text" v-model="form.title" placeholder="è¦åšä»€éº¼ï¼Ÿ">
                    <input type="text" v-model="form.loc" placeholder="åœ°é»">
                    <input type="text" v-model="form.trans" placeholder="äº¤é€šæ–¹å¼ (ä¾‹: JRã€å·´å£«)">
                    <input type="number" v-model="form.cost" placeholder="é ä¼°æ—¥å¹£é‡‘é¡">
                </div>

                <div v-if="activeTab === 'book'">
                    <select v-model="form.type"><option>æ©Ÿç¥¨</option><option>ä½å®¿</option><option>ç§Ÿè»Š</option></select>
                    <input type="text" v-model="form.from" placeholder="å‡ºç™¼åœ° (ä¾‹: TPE)">
                    <input type="text" v-model="form.to" placeholder="ç›®çš„åœ° (ä¾‹: CTS)">
                    <input type="text" v-model="form.fromTime" placeholder="æ™‚é–“ (ä¾‹: 15:00)">
                    <input type="text" v-model="form.toTime" placeholder="åˆ°é”æ™‚é–“">
                </div>

                <div v-if="activeTab === 'money'">
                    <select v-model="form.cate"><option>ğŸ± é£²é£Ÿ</option><option>ğŸ›ï¸ è³¼ç‰©</option><option>ğŸŸï¸ é–€ç¥¨</option></select>
                    <input type="number" v-model="form.amount" placeholder="æ—¥å¹£é‡‘é¡">
                    <input type="text" v-model="form.note" placeholder="å‚™è¨»">
                </div>

                <button @click="save" style="background:var(--primary); color:white; width:100%; padding:15px; border:none; border-radius:15px; font-weight:bold;">å„²å­˜</button>
            </div>
        </div>
    </div>

    <script>
        const { createApp } = Vue
        createApp({
            data() {
                return {
                    currentDay: 1, activeTab: 'trip', showModal: false,
                    navs: [
                        {id: 'trip', name: 'è¡Œç¨‹', icon: 'ğŸ—ºï¸'},
                        {id: 'book', name: 'é è¨‚', icon: 'ğŸ“–'},
                        {id: 'money', name: 'è¨˜å¸³', icon: 'ğŸª™'},
                        {id: 'photo', name: 'æ—¥èªŒ', icon: 'ğŸ“¸'}
                    ],
                    form: { time: '10:00', title: '', loc: '', trans: '', cost: null, from: '', to: '', fromTime: '', toTime: '', type: 'æ©Ÿç¥¨', cate: 'ğŸ± é£²é£Ÿ', amount: null, note: '' },
                    trips: JSON.parse(localStorage.getItem('hk_trips') || '[]'),
                    bookings: JSON.parse(localStorage.getItem('hk_books') || '[]'),
                    expenses: JSON.parse(localStorage.getItem('hk_exps') || '[]')
                }
            },
            computed: {
                currentDayTrips() { return this.trips.filter(t => t.day === this.currentDay).sort((a,b) => a.time.localeCompare(b.time)); },
                currentDayExpenses() { return this.expenses.filter(e => e.day === this.currentDay); },
                dayTotal() { return this.currentDayExpenses.reduce((s, e) => s + Number(e.amount), 0); }
            },
            methods: {
                save() {
                    if(this.activeTab === 'trip') {
                        this.trips.push({...this.form, id: Date.now(), day: this.currentDay});
                        localStorage.setItem('hk_trips', JSON.stringify(this.trips));
                    } else if(this.activeTab === 'book') {
                        this.bookings.push({...this.form, id: Date.now()});
                        localStorage.setItem('hk_books', JSON.stringify(this.bookings));
                    } else if(this.activeTab === 'money') {
                        this.expenses.push({...this.form, id: Date.now(), day: this.currentDay});
                        localStorage.setItem('hk_exps', JSON.stringify(this.expenses));
                    }
                    this.showModal = false;
                    this.form = { time: '10:00', title: '', loc: '', trans: '', cost: null, from: '', to: '', fromTime: '', toTime: '', type: 'æ©Ÿç¥¨', cate: 'ğŸ± é£²é£Ÿ', amount: null, note: '' };
                }
            }
        }).mount('#app')
    </script>
</body>
</html>
